services:
  air-friends:
    container_name: air-friends
    image: ghcr.io/jim60105/air-friends:latest
    build:
      context: .
      dockerfile: Containerfile
      target: final
      args:
        - NODE_ENV=development
    env_file:
      - .env
    volumes:
      - data:/app/data:Z  # Contains workspaces/ and agent-workspace/
      # - ./config.yaml:/app/config.yaml:ro,Z
      # Mount custom prompts directory (optional, comment out to use defaults)
      # Ensure you provide all required prompt files (system.md and fragments)
      # - ./prompts:/app/prompts:ro,Z
      # OpenCode auth state (writable - contains OAuth refresh tokens renewed by OpenCode CLI)
      # - ${HOME}/.local/share/opencode/auth.json:/home/deno/.local/share/opencode/auth.json:Z

volumes:
  data:
